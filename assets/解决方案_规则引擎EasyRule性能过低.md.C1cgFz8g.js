import{_ as i,c as a,o as n,a1 as l}from"./chunks/framework.CPsxJxQM.js";const g=JSON.parse('{"title":"EasyRuleä¸­åº”ç”¨MVELå¯¼è‡´é”ç«äº‰é—®é¢˜","description":"","frontmatter":{},"headers":[],"relativePath":"è§£å†³æ–¹æ¡ˆ/è§„åˆ™å¼•æ“EasyRuleæ€§èƒ½è¿‡ä½.md","filePath":"è§£å†³æ–¹æ¡ˆ/è§„åˆ™å¼•æ“EasyRuleæ€§èƒ½è¿‡ä½.md"}'),e={name:"è§£å†³æ–¹æ¡ˆ/è§„åˆ™å¼•æ“EasyRuleæ€§èƒ½è¿‡ä½.md"};function h(p,s,t,k,r,E){return n(),a("div",null,s[0]||(s[0]=[l(`<h1 id="easyruleä¸­åº”ç”¨mvelå¯¼è‡´é”ç«äº‰é—®é¢˜" tabindex="-1">EasyRuleä¸­åº”ç”¨MVELå¯¼è‡´é”ç«äº‰é—®é¢˜ <a class="header-anchor" href="#easyruleä¸­åº”ç”¨mvelå¯¼è‡´é”ç«äº‰é—®é¢˜" aria-label="Permalink to &quot;EasyRuleä¸­åº”ç”¨MVELå¯¼è‡´é”ç«äº‰é—®é¢˜&quot;">â€‹</a></h1><p>æˆ‘ä»¬æ”¯ä»˜æœåŠ¡ï¼Œåœ¨è¯·æ±‚æ”¯ä»˜é€šé“ä¹‹å‰ä¼šæœ‰é€šé“è·¯ç”±ï¼Œç›®çš„æ˜¯æ ¹æ®ä¸‹å•å‚æ•°ï¼Œèƒ½å‡†ç¡®çš„åŒ¹é…åˆ°æ”¶æ¬¾çš„é€šé“ä¸å•†æˆ·ã€‚ åœ¨åŒ¹é…è·¯ç”±çš„é€»è¾‘ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†EasyRuleå¼•æ“ï¼Œä½†æ˜¯æœ€è¿‘æ ¸å¿ƒä»£ç å˜åŠ¨å‹æµ‹æ—¶ï¼Œå‘ç°æµ‹è¯•ç¯å¢ƒä¸‹å•æ¥å£åªèƒ½å‹åˆ°2.5qpsä½œç”¨ï¼Œè™½ç„¶æµ‹è¯•ç¯å¢ƒæ€§èƒ½ä¸€èˆ¬ï¼Œä½†æ˜¯ä¹Ÿå¤ªä½äº†ã€‚ äºæ˜¯å¼€å§‹æ’æŸ¥é—®é¢˜ï¼Œæœ€ç»ˆå®šä½EasyRuleä½¿ç”¨æ—¶åœ¨MVELå¤„ç†ä¸Šæœ‰æ€§èƒ½ç“¶é¢ˆã€‚</p><h2 id="_1-å¤šçº¿ç¨‹åˆ›å»ºè§„åˆ™-å¹¶æ”¹å˜æ³¨å†Œè§„åˆ™æ–¹å¼" tabindex="-1">1.å¤šçº¿ç¨‹åˆ›å»ºè§„åˆ™ï¼Œå¹¶æ”¹å˜æ³¨å†Œè§„åˆ™æ–¹å¼ <a class="header-anchor" href="#_1-å¤šçº¿ç¨‹åˆ›å»ºè§„åˆ™-å¹¶æ”¹å˜æ³¨å†Œè§„åˆ™æ–¹å¼" aria-label="Permalink to &quot;1.å¤šçº¿ç¨‹åˆ›å»ºè§„åˆ™ï¼Œå¹¶æ”¹å˜æ³¨å†Œè§„åˆ™æ–¹å¼&quot;">â€‹</a></h2><p>é€šè¿‡åˆ†æå‘ç°ï¼Œåœ¨EasyRuleè§„åˆ™åˆ›å»ºä¸æ³¨å†Œè¾ƒæ…¢ï¼›ä¹‹å‰æ˜¯é€šè¿‡é€ä¸€åˆ›å»ºè§„åˆ™ã€æ³¨å†Œçš„æ–¹å¼ã€‚æœ¬æ¬¡å˜æ›´é€šè¿‡æ„é€ å™¨ä¸€æ¬¡æ€§æ³¨å†Œã€‚</p><h4 id="å˜æ›´å‰" tabindex="-1">å˜æ›´å‰ <a class="header-anchor" href="#å˜æ›´å‰" aria-label="Permalink to &quot;å˜æ›´å‰&quot;">â€‹</a></h4><p>å°†è¡¨è¾¾å¼é€ä¸ªåˆ›å»ºæˆRuleè§„åˆ™ï¼Œç„¶åä¾æ¬¡æ³¨å†Œåˆ°Rules</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Rules rules = new Rules();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>for:exprList</span></span>
<span class="line"><span>    Rule r = new MVELRule()</span></span>
<span class="line"><span>    rules.register(r);</span></span></code></pre></div><h4 id="å˜æ›´å" tabindex="-1">å˜æ›´å <a class="header-anchor" href="#å˜æ›´å" aria-label="Permalink to &quot;å˜æ›´å&quot;">â€‹</a></h4><ul><li>å¤šçº¿ç¨‹åˆ›å»ºRuleï¼Œå¹¶ç¼“å­˜ã€‚</li><li>ç¼“å­˜ä¸¤åˆ†é’Ÿï¼Œåç»­è¯·æ±‚æ— éœ€é‡å¤åˆ›å»ºï¼Œç›´æ¥ä½¿ç”¨ã€‚</li><li>ä¸€æ¬¡æ€§åˆå§‹åŒ–åˆ°Rulesï¼Œå–æ¶ˆä¾æ¬¡æ³¨å†Œé€»è¾‘ã€‚(new Rules(ruleList.toArray()))</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>List&lt;Rule&gt; rList</span></span>
<span class="line"><span>List&lt;Future&lt;Rule&gt;&gt; fList</span></span>
<span class="line"><span></span></span>
<span class="line"><span>for:</span></span>
<span class="line"><span>   fList.add(executor.submit(new MVELRule()))</span></span>
<span class="line"><span></span></span>
<span class="line"><span>for:fList</span></span>
<span class="line"><span>   rList.add(f.get())</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Rules rules = new Rules(rList.toArray());</span></span>
<span class="line"><span></span></span>
<span class="line"><span>å¤šçº¿ç¨‹å¹¶å‘åˆ›å»ºMVELRule</span></span></code></pre></div><p><strong>è§£å†³</strong>ï¼šé€šè¿‡çº¿ç¨‹æ± è¿›è¡Œå¤šçº¿ç¨‹åˆ›å»ºMVELRuleå¯¹è±¡ï¼Œå¹¶ç»Ÿä¸€é€šè¿‡æ„é€ å‡½æ•°ï¼Œæ³¨å†Œåˆ°Rules<br><strong>æ•ˆæœ</strong>ï¼š20ç”¨æˆ·å‹10qpsï¼Œp95 5s-&gt;3.5sï¼Œqpsåˆ°è¾¾3,é—®é¢˜è¿˜æ˜¯æ²¡æœ‰è§£å†³ã€‚</p><h2 id="_2-é¢„çƒ­å¹¶å¯¹è§„åˆ™è¿›è¡Œttlç¼“å­˜-é¿å…åˆ›å»ºå’ŒåŒ¹é…æ—¶çš„èµ„æºç«äº‰ã€‚" tabindex="-1">2.é¢„çƒ­å¹¶å¯¹è§„åˆ™è¿›è¡ŒTTLç¼“å­˜ï¼Œé¿å…åˆ›å»ºå’ŒåŒ¹é…æ—¶çš„èµ„æºç«äº‰ã€‚ <a class="header-anchor" href="#_2-é¢„çƒ­å¹¶å¯¹è§„åˆ™è¿›è¡Œttlç¼“å­˜-é¿å…åˆ›å»ºå’ŒåŒ¹é…æ—¶çš„èµ„æºç«äº‰ã€‚" aria-label="Permalink to &quot;2.é¢„çƒ­å¹¶å¯¹è§„åˆ™è¿›è¡ŒTTLç¼“å­˜ï¼Œé¿å…åˆ›å»ºå’ŒåŒ¹é…æ—¶çš„èµ„æºç«äº‰ã€‚&quot;">â€‹</a></h2><p><strong>å¸¸è§çº¿ç¨‹é—®é¢˜</strong></p><ol><li>çº¿ç¨‹æ­»é”ï¼šBLOCKED å…³é”®å­—è¡¨ç¤ºçº¿ç¨‹åœ¨ç­‰é”ã€‚æ­»é”å®šä½ï¼šæŸ¥çœ‹æ¯ä¸ª BLOCKED çŠ¶æ€çº¿ç¨‹çš„å †æ ˆä¿¡æ¯ï¼Œç¡®å®šå®ƒä»¬æ­£åœ¨ç­‰å¾…çš„èµ„æºã€‚å¦‚æœå­˜åœ¨å¾ªç¯ç­‰å¾…çš„æƒ…å†µï¼Œå³ A çº¿ç¨‹ç­‰å¾… B çº¿ç¨‹æŒæœ‰çš„é”ï¼Œè€Œ B çº¿ç¨‹åˆåœ¨ç­‰å¾… A çº¿ç¨‹æŒæœ‰çš„é”ï¼Œåˆ™å¯èƒ½å‘ç”Ÿæ­»é”ã€‚</li><li>çº¿ç¨‹é˜»å¡ï¼šBLOCKEDå…³é”®å­—ã€‚é˜»å¡å®šä½ï¼šå¦‚æœå‘ç°æœ‰å¤§é‡çº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€ï¼Œå¯èƒ½æ„å‘³ç€å­˜åœ¨æŸç§èµ„æºç«äº‰æˆ–è€…åŒæ­¥é—®é¢˜å¯¼è‡´çš„çº¿ç¨‹é˜»å¡ã€‚</li><li>æ­»å¾ªç¯ï¼šé€šè¿‡åˆ†æçº¿ç¨‹çš„è°ƒç”¨æ ˆä¿¡æ¯ï¼Œå¯ä»¥å‘ç°æ˜¯å¦å­˜åœ¨å¾ªç¯è°ƒç”¨ï¼Œä»è€Œåˆ¤æ–­æ˜¯å¦å‘ç”Ÿäº†æ­»å¾ªç¯ã€‚</li><li>èµ„æºç“¶é¢ˆï¼šé€šè¿‡åˆ†æçº¿ç¨‹è°ƒç”¨æ ˆä¿¡æ¯å’Œçº¿ç¨‹çŠ¶æ€ï¼Œå¯ä»¥å‘ç°æŸäº›çº¿ç¨‹åœ¨æ‰§è¡Œç‰¹å®šæ“ä½œæ—¶èŠ±è´¹äº†å¤§é‡æ—¶é—´ï¼Œä»è€Œå®šä½åˆ°å¯èƒ½å­˜åœ¨çš„èµ„æºç“¶é¢ˆé—®é¢˜ã€‚</li></ol><h3 id="_2-1-åˆ†æçº¿ç¨‹-ä½¿ç”¨arthasè¿›è¡Œ-thread-n-3" tabindex="-1">2.1 åˆ†æçº¿ç¨‹ ä½¿ç”¨arthasè¿›è¡Œ thread -n 3 <a class="header-anchor" href="#_2-1-åˆ†æçº¿ç¨‹-ä½¿ç”¨arthasè¿›è¡Œ-thread-n-3" aria-label="Permalink to &quot;2.1 åˆ†æçº¿ç¨‹ ä½¿ç”¨arthasè¿›è¡Œ thread -n 3&quot;">â€‹</a></h3><blockquote><p>ä¸ºä»€ä¹ˆçº¿ç¨‹http-nio-9090-exec-10è¢«é˜»å¡ï¼Ÿ<br> å› ä¸ºEasyRuleè¿›è¡Œfireæ—¶ï¼Œéœ€è¦MVELè§£æè¡¨è¾¾å¼(è¡¨è¾¾å¼æ¶‰åŠjavaç±»å‹ã€æ–¹æ³•ç­‰è®¿é—®)ã€‚æ­¤è¿‡ç¨‹éœ€è¦åŠ è½½ç±»ï¼Œäº‰æŠ¢ClassLoaderå†…éƒ¨é”ï¼Œä½†æ­¤æ—¶å†…éƒ¨é”è¢«çº¿ç¨‹RouteRuleCreateExecutor-6æŒæœ‰ã€‚</p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;http-nio-9090-exec-10&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Id=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">175</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cpuUsage=26.33%</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deltaTime=53ms</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> time=25546ms</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BLOCKED</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> java.lang.Object@49e661ed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> owned</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> by</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;RouteRuleCreateExecutor-6&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Id=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">250</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.apache.catalina.loader.WebappClassLoaderBase.loadClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WebappClassLoaderBase.java:1152</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  blocked</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> java.lang.Object@49e661ed</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.apache.catalina.loader.WebappClassLoaderBase.loadClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WebappClassLoaderBase.java:1119</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.util.ParseTools.forNameWithInner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ParseTools.java:2231</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.optimizers.AbstractOptimizer.tryStaticAccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AbstractOptimizer.java:88</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.compiler.PropertyVerifier.getBeanProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PropertyVerifier.java:257</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.compiler.PropertyVerifier.analyze</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PropertyVerifier.java:133</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.compiler.ExpressionCompiler.verify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ExpressionCompiler.java:399</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.compiler.ExpressionCompiler._compile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ExpressionCompiler.java:281</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.util.ParseTools.subCompileExpression</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ParseTools.java:2112</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.optimizers.impl.refl.ReflectiveAccessorOptimizer.getMethod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReflectiveAccessorOptimizer.java:969</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.optimizers.impl.refl.ReflectiveAccessorOptimizer.compileGetChain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReflectiveAccessorOptimizer.java:367</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.optimizers.impl.refl.ReflectiveAccessorOptimizer.optimizeAccessor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReflectiveAccessorOptimizer.java:167</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.optimizers.dynamic.DynamicOptimizer.optimizeAccessor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DynamicOptimizer.java:81</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.ast.Union.getReducedValueAccelerated</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Union.java:44</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.ast.Or.getReducedValueAccelerated</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Or.java:35</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.ast.Or.getReducedValueAccelerated</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Or.java:34</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.compiler.ExecutableAccessor.getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ExecutableAccessor.java:38</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.ast.Substatement.getReducedValueAccelerated</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Substatement.java:44</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.compiler.ExecutableAccessor.getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ExecutableAccessor.java:38</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.ast.Negation.getReducedValueAccelerated</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Negation.java:48</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.ast.And.getReducedValueAccelerated</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">And.java:34</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.ast.And.getReducedValueAccelerated</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">And.java:35</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.compiler.ExecutableAccessor.getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ExecutableAccessor.java:42</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.MVEL.executeExpression</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MVEL.java:984</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.jeasy.rules.mvel.MVELCondition.evaluate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MVELCondition.java:65</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.jeasy.rules.mvel.MVELRule.evaluate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MVELRule.java:120</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.jeasy.rules.core.DefaultRulesEngine.doFire</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DefaultRulesEngine.java:97</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.jeasy.rules.core.DefaultRulesEngine.fire</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DefaultRulesEngine.java:70</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    ...</span></span></code></pre></div><p>å †æ ˆä¿¡æ¯è§£è¯»å¦‚ä¸‹ï¼š(è§„åˆ™å¼•æ“ä½¿ç”¨MVELå¯¼è‡´çš„é”ç«äº‰)</p><ul><li>é˜»å¡æƒ…å†µï¼šå½“å‰çº¿ç¨‹(http-nio-9090-exec-10 Id=175)è¢«çº¿ç¨‹RouteRuleCreateExecutor-6 Id=250é˜»å¡ã€‚</li><li>é˜»å¡åŸå› ï¼šé”java.lang.Object@49e661edè¢«250æŒæœ‰ï¼Œä½†æ˜¯175éœ€è¦è·å–ã€‚</li><li>é˜»å¡æ—¶é—´ï¼š25546ms</li><li>é”ä¿¡æ¯ï¼šWebappClassLoaderBase#loadClassçš„</li></ul><h3 id="_2-2-å¼‚å¸¸ä»£ç ç°åœº" tabindex="-1">2.2 å¼‚å¸¸ä»£ç ç°åœº <a class="header-anchor" href="#_2-2-å¼‚å¸¸ä»£ç ç°åœº" aria-label="Permalink to &quot;2.2 å¼‚å¸¸ä»£ç ç°åœº&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WebappClassLoaderBase</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URLClassLoader</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Lifecycle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">InstrumentableClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WebappProperties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PermissionCheck</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Class&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">boolean</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ClassNotFoundException {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ä»http-nio-9090-exec-10çº¿ç¨‹å †æ ˆä¿¡æ¯æ¥çœ‹ï¼Œè¿™é‡Œæ˜¯ç«äº‰çš„ä½ç½® </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      synchronized</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getClassLoadingLock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         // other ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ClassNotFoundException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    * è¯¥æ–¹æ³•åœ¨java.lang.ClassLoaderä¸­å¼•å…¥ï¼ŒJDK 7 ä»¥åæ”¯æŒå¹¶è¡Œç±»åŠ è½½ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    * èƒ½åŠ›ï¼š</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    * åŒç±»(åclassName)æŒæœ‰åŒä¸€ä¸ªé”å¯¹è±¡ï¼Œä¸åŒç±»çš„é”ç›¸äº’ç‹¬ç«‹ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    * ä¸ºäº†å®ç°åŒä¸€ä¸ªç±»ä¸²è¡ŒåŠ è½½ï¼Œä¸åŒç±»å¯ä»¥å¤šçº¿ç¨‹å¹¶è¡ŒåŠ è½½ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    * </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> className</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> com.xxx.A</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> lock</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   protected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getClassLoadingLock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">className</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      Object lock </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (parallelLockMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         Object newLock </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// lock</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         lock </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parallelLockMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">putIfAbsent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(className, newLock);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">         if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (lock </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            lock </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> newLock;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lock;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>æ‰€ä»¥ï¼ŒWebappClassLoaderBase.loadClass() æ˜¯åŒæ­¥æ–¹æ³•ï¼ˆå¸¦é”ï¼‰ï¼Œå½“å¤šä¸ªçº¿ç¨‹å¹¶å‘è°ƒç”¨ MVEL ç¼–è¯‘è¡¨è¾¾å¼ï¼Œå¹¶å°è¯• Class.forName() åŠ è½½ç±»æ—¶ï¼Œå¯èƒ½ä¼šäº‰æŠ¢ ClassLoader çš„å†…éƒ¨é”</p><blockquote><p>ğŸ”” <strong>ç±»åŠ è½½å™¨æ˜¯å¤šçº¿ç¨‹å…±äº«èµ„æºï¼Œä¸€æ—¦æœ‰çº¿ç¨‹åŠ è½½ç±»ï¼Œå…¶ä»–çº¿ç¨‹å¿…é¡»ç­‰å¾…åŠ è½½å®Œæˆæ‰èƒ½ç»§ç»­ã€‚</strong></p></blockquote><h3 id="_2-3-ç»§ç»­çœ‹çœ‹routerulecreateexecutor-6æ˜¯ä»€ä¹ˆåŸå› éœ€è¦classloaderè¿™æŠŠé”-å¹¶ä¸”ä¸€ç›´å ç€å‘¢" tabindex="-1">2.3 ç»§ç»­çœ‹çœ‹RouteRuleCreateExecutor-6æ˜¯ä»€ä¹ˆåŸå› éœ€è¦ClassLoaderè¿™æŠŠé”,å¹¶ä¸”ä¸€ç›´å ç€å‘¢ï¼Ÿ <a class="header-anchor" href="#_2-3-ç»§ç»­çœ‹çœ‹routerulecreateexecutor-6æ˜¯ä»€ä¹ˆåŸå› éœ€è¦classloaderè¿™æŠŠé”-å¹¶ä¸”ä¸€ç›´å ç€å‘¢" aria-label="Permalink to &quot;2.3 ç»§ç»­çœ‹çœ‹RouteRuleCreateExecutor-6æ˜¯ä»€ä¹ˆåŸå› éœ€è¦ClassLoaderè¿™æŠŠé”,å¹¶ä¸”ä¸€ç›´å ç€å‘¢ï¼Ÿ&quot;">â€‹</a></h3><p><strong>ä¸¥é‡çš„ç±»åŠ è½½é˜»å¡é—®é¢˜</strong>ï¼šJVMåº•å±‚ I/O + Tomcat ç±»åŠ è½½æœºåˆ¶ + MVEL ç¼–è¯‘è¡¨è¾¾å¼äº¤äº’ä¸‹çš„å…¸å‹æ¡ˆä¾‹ã€‚</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;RouteRuleCreateExecutor-6&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Id=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">250</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cpuUsage=23.81%</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deltaTime=48ms</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> time=89590ms</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BLOCKED</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> java.util.zip.ZipFile.getEntry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Native</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.apache.catalina.loader.WebappClassLoaderBase.loadClass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WebappClassLoaderBase.java:1152</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.compiler.ExpressionCompiler.compile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ExpressionCompiler.java:67</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.mvel2.MVEL.compileExpression</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MVEL.java:826</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.jeasy.rules.mvel.MVELCondition.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ini</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&gt;(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MVELCondition.java:59</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> org.jeasy.rules.mvel.MVELRule.when</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MVELRule.java:104</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)    </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   ...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> java.util.concurrent.FutureTask.run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FutureTask.java:266</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> java.util.concurrent.ThreadPoolExecutor.runWorker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ThreadPoolExecutor.java:1149</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> java.lang.Thread.run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Thread.java:748</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>å †æ ˆä¿¡æ¯è§£è¯»å¦‚ä¸‹ï¼š(å¤šçº¿ç¨‹I/Oå¯¹ã€Œnative I/Oã€é”äº‰æŠ¢ å¯¼è‡´çš„é˜»å¡)</p><ul><li>é˜»å¡æƒ…å†µï¼šRouteRuleCreateExecutor-6 ä»å‹ç¼©æ–‡ä»¶è¯»ç±»æ—¶è¢«é˜»å¡</li><li>é˜»å¡åŸå› ï¼šMVELåŠ è½½jvmåŸºç¡€ç±»æ—¶éœ€è¦ä»jaré‡Œè¯»å–ï¼Œä½†æ˜¯å…¶ä»–çº¿ç¨‹æŒæœ‰äº† native I/O é”</li><li>é˜»å¡æ—¶é—´ï¼š89590ms</li><li>é”ä¿¡æ¯ï¼šnative I/O</li></ul><p>ç”±æ­¤å¯è§æ˜¯åœ¨å¤šçº¿ç¨‹åˆ›å»ºMVELRuleæ—¶ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¼šç¼–è¯‘ä¼ å…¥çš„MVELè¡¨è¾¾å¼ï¼Œæ‰€ä»¥ä¼šè¿›è¡Œç±»åŠ è½½ï¼Œ</p><h3 id="_2-4-ç¬¬äºŒpaæ€»ç»“" tabindex="-1">2.4 ç¬¬äºŒPAæ€»ç»“ <a class="header-anchor" href="#_2-4-ç¬¬äºŒpaæ€»ç»“" aria-label="Permalink to &quot;2.4 ç¬¬äºŒPAæ€»ç»“&quot;">â€‹</a></h3><p><strong>ä½¿ç”¨MVELç¼–è¯‘è¡¨è¾¾å¼æ—¶ä¼šæ¶‰åŠåŠ è½½ç±»ï¼Œäº‰æŠ¢ClassLoaderå†…éƒ¨é”ï¼ŒåŒæ—¶åœ¨åŠ è½½ç±»æ—¶ä¼šæ¶‰åŠnative I/Oé”ç«äº‰</strong></p><p>å³ï¼š åˆ›å»ºMVELRuleå¯¹è±¡æ—¶çš„whenï¼Œä¸rulesEngine.fireæ“ä½œæ—¶éƒ½ä¼šæ¶‰åŠè§£æMVELè¡¨è¾¾å¼ï¼Œä»è€Œä¼šé€ æˆé”å†²çªã€‚</p><p>è§£å†³ï¼šä½¿ç”¨Caffeineç¼“å­˜MVENRuleåˆ›å»ºçš„å¯¹è±¡ï¼Œé™ä½ç«äº‰ã€‚å½“ç„¶ï¼Œç”±äºè§„åˆ™å¯èƒ½ä¼šå˜ï¼Œæ‰€ä»¥ç¼“å­˜æ—¶é—´å¯ä»¥çŸ­äº›ï¼Œæ¯”å¦‚1-2minï¼Œå®é™…éœ€è§†ä¸šåŠ¡æƒ…å†µè€Œå®šã€‚</p><h2 id="æœ€ç»ˆæ€§èƒ½-2qps-100-qps" tabindex="-1">æœ€ç»ˆæ€§èƒ½ï¼š2qps-&gt; 100+qps <a class="header-anchor" href="#æœ€ç»ˆæ€§èƒ½-2qps-100-qps" aria-label="Permalink to &quot;æœ€ç»ˆæ€§èƒ½ï¼š2qps-&gt; 100+qps&quot;">â€‹</a></h2>`,34)]))}const F=i(e,[["render",h]]);export{g as __pageData,F as default};

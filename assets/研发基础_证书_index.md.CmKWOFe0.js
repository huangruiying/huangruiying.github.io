import{_ as a,c as i,o as t,a1 as n}from"./chunks/framework.CPsxJxQM.js";const c=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"研发基础/证书/index.md","filePath":"研发基础/证书/index.md"}'),l={name:"研发基础/证书/index.md"};function e(h,s,p,d,r,k){return t(),i("div",null,s[0]||(s[0]=[n(`<h2 id="基础简介" tabindex="-1">基础简介 <a class="header-anchor" href="#基础简介" aria-label="Permalink to &quot;基础简介&quot;">​</a></h2><h3 id="在-rsa-或-sm2-这种非对称加密体系中-公钥和私钥的作用是" tabindex="-1">在 RSA 或 SM2 这种非对称加密体系中，公钥和私钥的作用是： <a class="header-anchor" href="#在-rsa-或-sm2-这种非对称加密体系中-公钥和私钥的作用是" aria-label="Permalink to &quot;在 RSA 或 SM2 这种非对称加密体系中，公钥和私钥的作用是：&quot;">​</a></h3><table tabindex="0"><thead><tr><th>功能</th><th>场景</th><th>使用者</th><th>用什么密钥</th></tr></thead><tbody><tr><td>加密</td><td>保密传输</td><td>发起方</td><td>对方的 <strong>公钥</strong></td></tr><tr><td>解密</td><td>保密传输</td><td>接收方</td><td>自己的 <strong>私钥</strong></td></tr><tr><td>签名</td><td>身份验证</td><td>发起方</td><td>自己的 <strong>私钥</strong> （对方用我方公钥验签）</td></tr><tr><td>验签</td><td>身份验证</td><td>接收方</td><td>对方的 <strong>公钥</strong> （对方用对方私钥加签）</td></tr></tbody></table><h3 id="md5-签名" tabindex="-1">MD5 签名 <a class="header-anchor" href="#md5-签名" aria-label="Permalink to &quot;MD5 签名&quot;">​</a></h3><p>实际上就是再对参数计算一遍，然后对比签名串sign结果</p><h3 id="支付系统内-验签场景下" tabindex="-1">支付系统内，验签场景下 <a class="header-anchor" href="#支付系统内-验签场景下" aria-label="Permalink to &quot;支付系统内，验签场景下&quot;">​</a></h3><table tabindex="0"><thead><tr><th>加密方式</th><th>密钥对</th><th>生成方</th><th>作用</th></tr></thead><tbody><tr><td>RSA</td><td>商户公钥</td><td>商户</td><td>提供给通道，通道用于验签</td></tr><tr><td></td><td>商户私钥</td><td>商户</td><td>商户用于加签，只有商户保留</td></tr><tr><td></td><td>通道公钥</td><td>通道</td><td>提供给商户，商户用于验签</td></tr><tr><td></td><td>通道私钥</td><td>通道</td><td>通道用于加验，只有通道保留</td></tr><tr><td>国密SM2</td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr></tbody></table><h2 id="查看证书信息" tabindex="-1">查看证书信息 <a class="header-anchor" href="#查看证书信息" aria-label="Permalink to &quot;查看证书信息&quot;">​</a></h2><h3 id="查看-pfx-证书信息" tabindex="-1">查看 .pfx 证书信息 <a class="header-anchor" href="#查看-pfx-证书信息" aria-label="Permalink to &quot;查看 .pfx 证书信息&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>openssl pkcs12 -in sign_name.pfx -info -nodes</span></span></code></pre></div><h3 id="查看-cer-证书信息" tabindex="-1">查看 .cer 证书信息 <a class="header-anchor" href="#查看-cer-证书信息" aria-label="Permalink to &quot;查看 .cer 证书信息&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>openssl x509 -in sign_name.cer -text -noout</span></span></code></pre></div><h3 id="查看-jks-p12-证书信息" tabindex="-1">查看 .jks .p12 证书信息 <a class="header-anchor" href="#查看-jks-p12-证书信息" aria-label="Permalink to &quot;查看 .jks .p12 证书信息&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>keytool -list -v -keystore xxx.jks</span></span></code></pre></div><h2 id="识别证书类型" tabindex="-1">识别证书类型 <a class="header-anchor" href="#识别证书类型" aria-label="Permalink to &quot;识别证书类型&quot;">​</a></h2><h3 id="rsa证书" tabindex="-1">RSA证书 <a class="header-anchor" href="#rsa证书" aria-label="Permalink to &quot;RSA证书&quot;">​</a></h3><p>证书信息内包含</p><ul><li>Signature Algorithm: sha1WithRSAEncryption</li><li>OID号码为 1.2.840.xxx</li><li>.pfx的CSP Microsoft RSA CSP</li></ul><h3 id="国密证书" tabindex="-1">国密证书 <a class="header-anchor" href="#国密证书" aria-label="Permalink to &quot;国密证书&quot;">​</a></h3><p>证书信息内包含</p><ul><li>OID号码为 1.2.156.10197.xxx</li><li>.pfx的CSP Microsoft SM2 CSP</li></ul><h2 id="证书序列号及私钥查看" tabindex="-1">证书序列号及私钥查看 <a class="header-anchor" href="#证书序列号及私钥查看" aria-label="Permalink to &quot;证书序列号及私钥查看&quot;">​</a></h2><h3 id="p12" tabindex="-1">.p12 <a class="header-anchor" href="#p12" aria-label="Permalink to &quot;.p12&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 获取p12证书</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 准备好正确版本的命令</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> what are u 弄啥嘞 $ openssl -v</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OpenSSL</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3.2.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 30</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Jan</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Library: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">OpenSSL</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3.2.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 30</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Jan</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/usr/local/Cellar/openssl@3/3.2.1/bin/openssl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># p12转cert.pem (brew install libressl)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pkcs12</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1616383665.p12</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1616383665.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -nodes</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看序列号serialNumber</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x509</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -in</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1616383665.pe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -text</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -noout</span></span></code></pre></div><h3 id="若你的版本不支持legacy-provider-可以通过指定配置文件进行使用openssl" tabindex="-1">若你的版本不支持legacy provider,可以通过指定配置文件进行使用openssl <a class="header-anchor" href="#若你的版本不支持legacy-provider-可以通过指定配置文件进行使用openssl" aria-label="Permalink to &quot;若你的版本不支持legacy provider,可以通过指定配置文件进行使用openssl&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.openssl_legacy.cnf</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">openssl_conf = openssl_init</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[openssl_init]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">providers = provider_sect</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[provider_sect]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">default = default_sect</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">legacy = legacy_sect</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[default_sect]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">activate = 1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[legacy_sect]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">activate = 1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定配置使用openssl</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">OPENSSL_CONF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">~/.openssl_legacy.cnf</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">openssl </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pkcs12</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1679630445.p12</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -out</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1679630445.pem</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -nodes</span></span></code></pre></div>`,27)]))}const g=a(l,[["render",e]]);export{c as __pageData,g as default};

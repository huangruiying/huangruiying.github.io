import{_ as e,c as n,o as s,a1 as t}from"./chunks/framework.CPsxJxQM.js";const _=JSON.parse('{"title":"支付收单流程","description":"","frontmatter":{},"headers":[],"relativePath":"支付系统/流程：支付收单服务全流程.md","filePath":"支付系统/流程：支付收单服务全流程.md"}'),l={name:"支付系统/流程：支付收单服务全流程.md"};function p(i,a,r,o,h,c){return s(),n("div",null,a[0]||(a[0]=[t(`<h1 id="支付收单流程" tabindex="-1">支付收单流程 <a class="header-anchor" href="#支付收单流程" aria-label="Permalink to &quot;支付收单流程&quot;">​</a></h1><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>下单，锁业务方唯一单号。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>路由收款通道</span></span>
<span class="line"><span></span></span>
<span class="line"><span>beforePay (支付核心单创建，主要落订单信息、金额、初始化状态、支付方式、支付产品)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>请求通道路由进行下单，获取</span></span>
<span class="line"><span>    支付参数：提供给前端，拉起收银台</span></span>
<span class="line"><span>    收款信息：实际收款通道、商户号、金额等</span></span>
<span class="line"><span></span></span>
<span class="line"><span>afterPay (将请求通道的结果&amp;收款信息，落库更新)</span></span></code></pre></div><h1 id="支付路由" tabindex="-1">支付路由 <a class="header-anchor" href="#支付路由" aria-label="Permalink to &quot;支付路由&quot;">​</a></h1><h2 id="支付通道路由" tabindex="-1">支付通道路由 <a class="header-anchor" href="#支付通道路由" aria-label="Permalink to &quot;支付通道路由&quot;">​</a></h2><p>请求通道：路由后， 直连直接下单，返回参数 App：返回TradeNo H5：返回html，没有请求通道 Mini：返回TradeNo 间连则根据不同端返回响应参数 小程序间连：可以直接通过通道下单，返回小程序内拉起收银台参数，写入路由到的商户号。 App、H5转间连：需要生成scheme（包装下单路径），然后写入路由到的商户号。</p><h2 id="交易查询-补单" tabindex="-1">交易查询(补单) <a class="header-anchor" href="#交易查询-补单" aria-label="Permalink to &quot;交易查询(补单)&quot;">​</a></h2><h2 id="退款" tabindex="-1">退款 <a class="header-anchor" href="#退款" aria-label="Permalink to &quot;退款&quot;">​</a></h2><h2 id="退款查询-补单" tabindex="-1">退款查询(补单) <a class="header-anchor" href="#退款查询-补单" aria-label="Permalink to &quot;退款查询(补单)&quot;">​</a></h2><h2 id="交易撤销-付款码支付场景-通道-接口-使用场景-功能描述" tabindex="-1">交易撤销，付款码支付场景，通道｜接口｜使用场景｜功能描述 <a class="header-anchor" href="#交易撤销-付款码支付场景-通道-接口-使用场景-功能描述" aria-label="Permalink to &quot;交易撤销，付款码支付场景，通道｜接口｜使用场景｜功能描述&quot;">​</a></h2><p>支付宝｜alipay.trade.cancel｜只有发生支付系统超时或者支付结果未知时可调用撤销｜若用户 支付失败：关单；支付成功：退款 微信｜｜｜</p><h2 id="交易关单" tabindex="-1">交易关单 <a class="header-anchor" href="#交易关单" aria-label="Permalink to &quot;交易关单&quot;">​</a></h2><p>支付宝｜alipay.trade.close｜超时未支付｜将未付款的交易进行关闭</p><h2 id="收单-退款-冲退-完成通知" tabindex="-1">收单｜退款｜冲退，完成通知 <a class="header-anchor" href="#收单-退款-冲退-完成通知" aria-label="Permalink to &quot;收单｜退款｜冲退，完成通知&quot;">​</a></h2><p>将识别真正的支付方式，并依赖单号进行更新</p>`,14)]))}const u=e(l,[["render",p]]);export{_ as __pageData,u as default};

<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Springframework on åšå®¢</title>
    <link>https://huangruiying.github.io/tags/springframework/</link>
    <description>Recent content in Springframework on åšå®¢</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Thu, 07 Sep 2023 14:01:20 +0800</lastBuildDate><atom:link href="https://huangruiying.github.io/tags/springframework/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>SpringBoot-åŠŸèƒ½å®ç°-ç¼–ç¨‹å¼äº‹åŠ¡</title>
      <link>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0-%E7%BC%96%E7%A8%8B%E5%BC%8F%E4%BA%8B%E5%8A%A1/</link>
      <pubDate>Thu, 07 Sep 2023 14:01:20 +0800</pubDate>
      
      <guid>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0-%E7%BC%96%E7%A8%8B%E5%BC%8F%E4%BA%8B%E5%8A%A1/</guid>
      <description>Springæ”¯æŒå£°æ˜å¼äº‹åŠ¡ç®¡ç†å’Œç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ä¸¤ç§æ–¹å¼ã€‚ å£°æ˜å¼äº‹åŠ¡ç®¡ç†,å³æˆ‘ä»¬å¸¸ç”¨çš„ @Transactional æ³¨è§£ã€‚ å£°æ˜å¼äº‹åŠ¡åŸºäºåˆ‡é¢å®ç°çš„ã€‚æœ¬è´¨æ˜¯å¯¹æ–¹æ³•å‰åè¿›è¡Œæ‹¦æˆªï¼Œç„¶ååœ¨ç›®æ ‡æ–¹æ³•å¼€å§‹ä¹‹å‰ä¼šåˆ›å»ºæˆ–è€…åŠ å…¥ä¸€ä¸ªäº‹åŠ¡ï¼Œåœ¨æ‰§è¡Œå®Œç›®æ ‡æ–¹æ³•ä¹‹åæ ¹æ®æ‰§è¡Œæƒ…å†µæäº¤æˆ–è€…å›æ»šäº‹åŠ¡ã€‚
ä¼˜ç‚¹æ˜¯ ä½¿ç”¨æ–¹ä¾¿ï¼Œæ¸…æ™°ã€‚ ç¼ºç‚¹æ˜¯ ä¸èƒ½ç²¾ç»†æ§åˆ¶äº‹ç‰©ç²’åº¦ï¼Œå³ä¸€ä¸ªæ–¹æ³•ä¸­åŒ…å«6æ¡æŸ¥è¯¢è¯­å¥ï¼Œ1æ¬¡ç½‘ç»œè¯·æ±‚ï¼Œ2æ¡æ›´æ–°è¯­å¥ï¼Œé‚£ä¹ˆæ–¹æ³•ä½¿ç”¨æ³¨è§£æ—¶å°±å¾ˆå¯èƒ½å‡ºè¡Œé•¿äº‹ç‰©ï¼Œå¯¼è‡´dbæ€§èƒ½é™ä½ã€‚ å¼€å¯äº‹ç‰©éœ€è¦ä¾èµ–Springåˆ‡é¢ï¼Œå³ä½¿ç”¨Springå®¹å™¨è·å–å¯¹è±¡åï¼Œè°ƒç”¨publicçš„ã€æ ‡è®°äº‹ç‰©æ³¨è§£çš„æ–¹æ³•æ‰èƒ½ç”Ÿæ•ˆã€‚
ç¼–ç¨‹å¼äº‹ç‰©ç®¡ç†,å³æˆ‘ä»¬å¸¸ç”¨çš„ æ³¨å…¥TransactionTemplate æ–¹å¼ï¼ˆæˆ–è€…PlatformTransactionManagerï¼‰ã€‚ ä¼˜ç‚¹æ˜¯ å¯ä»¥ç²¾ç»†æ§åˆ¶äº‹ç‰©ç²’åº¦ï¼Œ ç¼ºç‚¹æ˜¯</description>
    </item>
    
    <item>
      <title>SpringBoot-åŠŸèƒ½å®ç°-é…ç½®å…¨å±€jsonè§£æ</title>
      <link>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0-%E9%85%8D%E7%BD%AE%E5%85%A8%E5%B1%80json%E8%A7%A3%E6%9E%90/</link>
      <pubDate>Mon, 31 Jul 2023 14:01:20 +0800</pubDate>
      
      <guid>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0-%E9%85%8D%E7%BD%AE%E5%85%A8%E5%B1%80json%E8%A7%A3%E6%9E%90/</guid>
      <description> </description>
    </item>
    
    <item>
      <title>SpringBoot-åŠŸèƒ½å®ç°-è¿‡æ»¤å™¨</title>
      <link>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0-%E8%BF%87%E6%BB%A4%E5%99%A8/</link>
      <pubDate>Thu, 13 Jul 2023 14:01:20 +0800</pubDate>
      
      <guid>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0-%E8%BF%87%E6%BB%A4%E5%99%A8/</guid>
      <description>æœ¬æ–‡æ—¨åœ¨SpringBootä¸­å¦‚ä½•åˆ›å»ºä¸€ä¸ªè¿‡æ»¤å™¨ã€‚ ç›´æ¥å®ç°Filteræ¥å£+@Component /** * å®šä¹‰è¿‡æ»¤å™¨ */ @Component public class TimeFilter implements Filter { @Override public void init(FilterConfig filterConfig) throws ServletException { System.out.println(&amp;#34;è¿‡æ»¤å™¨åˆå§‹åŒ–&amp;#34;); } @Override public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws IOException, ServletException { long start = new Date().getTime(); filterChain.doFilter(request, response); System.out.println(&amp;#34;æ‰§è¡Œè€—æ—¶ï¼š&amp;#34; + (new Date().getTime() - start)); } @Override public void destroy() { System.out.println(&amp;#34;è¿‡æ»¤å™¨é”€æ¯&amp;#34;); } } @Bean+@Configurationï¼ˆç¬¬ä¸‰æ–¹Filterï¼‰ï¼›é@Componentæ ‡æ³¨çš„filterç±» @Configuration public class WebConfig extends WebMvcConfigurerAdapter { @Autowired TimeInterceptor timeInterceptor; @Bean public FilterRegistrationBean charsetFilter() { FilterRegistrationBean registrationBean = new FilterRegistrationBean(); // æ³¨å†Œè¿‡æ»¤å™¨åˆ°Spring registrationBean.</description>
    </item>
    
    <item>
      <title>SpringBoot-åŠŸèƒ½å®ç°-è·¨åŸŸ</title>
      <link>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0-%E8%B7%A8%E5%9F%9F/</link>
      <pubDate>Thu, 13 Jul 2023 14:01:20 +0800</pubDate>
      
      <guid>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0-%E8%B7%A8%E5%9F%9F/</guid>
      <description>ğŸ§
import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.springframework.http.HttpMethod; import org.springframework.web.cors.CorsConfiguration; import org.springframework.web.cors.reactive.CorsWebFilter; import org.springframework.web.cors.reactive.UrlBasedCorsConfigurationSource; import java.time.Duration; /** * * è·¨åŸŸé…ç½® * */ @Configuration public class SystemCorsConfiguration { @Bean public CorsWebFilter corsWebFilter() { CorsConfiguration corsConfig = new CorsConfiguration(); corsConfig.setAllowCredentials(true); corsConfig.addAllowedHeader(CorsConfiguration.ALL); corsConfig.addAllowedMethod(HttpMethod.GET); corsConfig.addAllowedMethod(HttpMethod.POST); corsConfig.addAllowedMethod(HttpMethod.PUT); corsConfig.addAllowedMethod(HttpMethod.DELETE); corsConfig.setMaxAge(Duration.ofMinutes(30)); corsConfig.addAllowedOrigin(CorsConfiguration.ALL); UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource(); source.registerCorsConfiguration(&amp;#34;/**&amp;#34;, corsConfig); return new CorsWebFilter(source); } } </description>
    </item>
    
    <item>
      <title>SpringBoot-åŠŸèƒ½å®ç°-æ‹¦æˆªå™¨</title>
      <link>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0-%E5%88%87%E9%9D%A2/</link>
      <pubDate>Thu, 13 Jul 2023 14:01:20 +0800</pubDate>
      
      <guid>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0-%E5%88%87%E9%9D%A2/</guid>
      <description>æœ¬æ–‡æ—¨åœ¨SpringBootä¸­å¦‚ä½•åˆ›å»ºä¸€ä¸ªåˆ‡é¢ã€‚</description>
    </item>
    
    <item>
      <title>SpringBoot-åŠŸèƒ½å®ç°-æ‹¦æˆªå™¨</title>
      <link>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0-%E6%8B%A6%E6%88%AA%E5%99%A8/</link>
      <pubDate>Thu, 13 Jul 2023 14:01:20 +0800</pubDate>
      
      <guid>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0-%E6%8B%A6%E6%88%AA%E5%99%A8/</guid>
      <description>æœ¬æ–‡æ—¨åœ¨SpringBootä¸­å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ‹¦æˆªå™¨ã€‚
/** * å®šä¹‰æ‹¦æˆªå™¨ * * @author huangry * Created in 2023/7/21 10:18 */ @Component @Slf4j public class SelfDefineInterceptor extends HandlerInterceptorAdapter { @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception { log.info(&amp;#34;beg SelfDefineInterceptor&amp;#34;); return true; } @Override public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception { log.info(&amp;#34;end SelfDefineInterceptor&amp;#34;); } } @Configuration public class SelfDefineWebMvcConfigurerAdapter extends WebMvcConfigurationSupport {// WebMvcConfigurer /** * æ³¨å†Œæ‹¦æˆªå™¨ */ @Autowired private SelfDefineInterceptor SelfDefineInterceptor; @Override public void addInterceptors(InterceptorRegistry registry) { // æ³¨å†Œæ‹¦æˆªå™¨,è‡ªå®šä¹‰ä¸åŒæ‹¦æˆªå™¨æ‹¦æˆªä¸åŒçš„åœ°å€ registry.</description>
    </item>
    
    <item>
      <title>SpringBoot-åŠŸèƒ½å®ç°-æ—¥å¿—æ“ä½œ</title>
      <link>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0-%E6%97%A5%E5%BF%97/</link>
      <pubDate>Thu, 13 Jul 2023 14:01:20 +0800</pubDate>
      
      <guid>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0-%E6%97%A5%E5%BF%97/</guid>
      <description>è‡ªå®šä¹‰æ—¥å¿—æ–‡ä»¶è¾“å‡ºï¼šæ‰‹åŠ¨ç”Ÿæˆæ—¥å¿— &amp;amp; æ‰“å…¥æŒ‡å®šæ—¥å¿—æ–‡ä»¶ &amp;lt;!-- å®šä¹‰æ—¥å¿—å¯¹è±¡åŠä¿¡æ¯ --&amp;gt; &amp;lt;configuration&amp;gt; &amp;lt;!-- å®šä¹‰ã€ŒæŒ‡å®šã€æ—¥å¿—æ–‡ä»¶é…ç½® --&amp;gt; &amp;lt;appender name=&amp;#34;httpConsumer&amp;#34; class=&amp;#34;ch.qos.logback.core.rolling.RollingFileAppender&amp;#34;&amp;gt; &amp;lt;file&amp;gt;${LOG_FILE}/consumer.log&amp;lt;/file&amp;gt; &amp;lt;encoder&amp;gt; &amp;lt;pattern&amp;gt;%msg%n&amp;lt;/pattern&amp;gt; &amp;lt;immediateFlush&amp;gt;true&amp;lt;/immediateFlush&amp;gt; &amp;lt;charset&amp;gt;UTF-8&amp;lt;/charset&amp;gt; &amp;lt;/encoder&amp;gt; &amp;lt;rollingPolicy class=&amp;#34;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&amp;#34;&amp;gt; &amp;lt;fileNamePattern&amp;gt;${LOG_FILE}/consumer-%d{yyyy-MM-dd-HH}-%i.log&amp;lt;/fileNamePattern&amp;gt; &amp;lt;maxFileSize&amp;gt;300MB&amp;lt;/maxFileSize&amp;gt; &amp;lt;maxHistory&amp;gt;240&amp;lt;/maxHistory&amp;gt; &amp;lt;CleanHistoryOnStart&amp;gt;true&amp;lt;/CleanHistoryOnStart&amp;gt; &amp;lt;totalSizeCap&amp;gt;60GB&amp;lt;/totalSizeCap&amp;gt; &amp;lt;/rollingPolicy&amp;gt; &amp;lt;/appender&amp;gt; &amp;lt;!-- å®šä¹‰æ—¥å¿—å¯¹è±¡åŠä¿¡æ¯ --&amp;gt; &amp;lt;appender name=&amp;#34;asyncHttpConsumer&amp;#34; class=&amp;#34;ch.qos.logback.classic.AsyncAppender&amp;#34;&amp;gt; &amp;lt;appender-ref ref=&amp;#34;httpConsumer&amp;#34;/&amp;gt; &amp;lt;queueSize&amp;gt;1024&amp;lt;/queueSize&amp;gt; &amp;lt;neverBlock&amp;gt;true&amp;lt;/neverBlock&amp;gt; &amp;lt;/appender&amp;gt; &amp;lt;!-- åˆ›å»ºæ—¥å¿—å¯¹è±¡ï¼Œjavaä»£ç é‡Œé¢é€šè¿‡nameè·å–æ—¥å¿—å¥æŸ„ --&amp;gt; &amp;lt;logger name=&amp;#34;http_consumer_log&amp;#34; additivity=&amp;#34;false&amp;#34;&amp;gt; &amp;lt;appender-ref ref=&amp;#34;asyncHttpConsumer&amp;#34;/&amp;gt; &amp;lt;/logger&amp;gt; &amp;lt;/configuration&amp;gt; /** * è¾“å‡ºè‡ªå®šä¹‰æ—¥å¿—åˆ°æŒ‡å®šæ—¥å¿—æ–‡ä»¶ &amp;lt;br/&amp;gt; * ä¾‹å¦‚ï¼šhttp_consumer_log */ public class Loggers { public static void main(String[] args) { // è·å–æ—¥å¿—å¯¹è±¡ï¼Œå¹¶å‘å…¶è¾“å‡ºæ—¥å¿—ä¿¡æ¯ Loggers.getHttpConsumerLogger().info(JSONObject.toJSONString(logMap)); } /** * æˆ‘æ–¹è°ƒç”¨å¤–éƒ¨æœåŠ¡çš„æ—¥å¿— */ private static final Logger HTTP_CONSUMER_LOGGER = LoggerFactory.</description>
    </item>
    
    <item>
      <title>SpringBoot-åŠŸèƒ½å®ç°-æ—¥å¿—æ“ä½œ-MDCçš„ä½¿ç”¨</title>
      <link>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0-%E6%97%A5%E5%BF%97-mdc%E7%9A%84%E4%BD%BF%E7%94%A8/</link>
      <pubDate>Thu, 13 Jul 2023 14:01:20 +0800</pubDate>
      
      <guid>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0-%E6%97%A5%E5%BF%97-mdc%E7%9A%84%E4%BD%BF%E7%94%A8/</guid>
      <description>MDCï¼šMapped Diagnostic Contextï¼Œå¯ä»¥ç²—ç•¥çš„ç†è§£æˆæ˜¯ä¸€ä¸ª çº¿ç¨‹å®‰å…¨çš„ å­˜æ”¾è¯Šæ–­æ—¥å¿—çš„ å®¹å™¨
ä»£ç ç¤ºä¾‹ /** * MDCå¿«é€Ÿå…¥é—¨ç¤ºä¾‹ * * å†™REQ_IDåˆ°æ—¥å¿—ä¸­ * */ public class SimpleMDC { private static final Logger logger = LoggerFactory.getLogger(SimpleMDC.class); // REQ_ID éœ€è¦åœ¨logback.xml å†…å®šä¹‰å¥½ public static final String REQ_ID = &amp;#34;REQ_ID&amp;#34;; public static final String TENANT = &amp;#34;Tenant&amp;#34;; public static void main(String[] args) { MDC.put(REQ_ID, UUID.randomUUID().toString()); MDC.put(TENANT, &amp;#34;å­˜æ”¾ç§Ÿæˆ·ID&amp;#34;); logger.info(&amp;#34;å¼€å§‹è°ƒç”¨æœåŠ¡Aï¼Œè¿›è¡Œä¸šåŠ¡å¤„ç†&amp;#34;); logger.info(&amp;#34;ä¸šåŠ¡å¤„ç†å®Œæ¯•ï¼Œå¯ä»¥é‡Šæ”¾ç©ºé—´äº†ï¼Œé¿å…å†…å­˜æ³„éœ²&amp;#34;); MDC.remove(REQ_ID); logger.info(&amp;#34;REQ_ID è¿˜æœ‰å—ï¼Ÿ{}&amp;#34;, MDC.get(REQ_ID) != null); } } logback.xml ç¤ºä¾‹ &amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;UTF-8&amp;#34; ?&amp;gt; &amp;lt;configuration&amp;gt; &amp;lt;appender name=&amp;#34;CONSOLE&amp;#34; class=&amp;#34;ch.</description>
    </item>
    
    <item>
      <title>SpringBoot-åŠŸèƒ½å®ç°-æŒ‡å®šæ•°æ®æºæ‰§è¡ŒSQL</title>
      <link>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0-%E6%8C%87%E5%AE%9A%E6%95%B0%E6%8D%AE%E6%BA%90%E6%89%A7%E8%A1%8Csql/</link>
      <pubDate>Thu, 13 Jul 2023 14:01:20 +0800</pubDate>
      
      <guid>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0-%E6%8C%87%E5%AE%9A%E6%95%B0%E6%8D%AE%E6%BA%90%E6%89%A7%E8%A1%8Csql/</guid>
      <description></description>
    </item>
    
    <item>
      <title>SpringBoot-æ£€æµ‹æ–¹æ³•äº‹ç‰©</title>
      <link>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/0x01.%E6%A3%80%E6%B5%8B%E5%BD%93%E5%89%8D%E6%96%B9%E6%B3%95%E4%BA%8B%E7%89%A9%E6%83%85%E5%86%B5/</link>
      <pubDate>Thu, 13 Jul 2023 14:01:20 +0800</pubDate>
      
      <guid>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/0x01.%E6%A3%80%E6%B5%8B%E5%BD%93%E5%89%8D%E6%96%B9%E6%B3%95%E4%BA%8B%E7%89%A9%E6%83%85%E5%86%B5/</guid>
      <description>æ–¹æ³•ä¸€:å¯ä»¥é€šè¿‡ TransactionSynchronizationManager#isActualTransactionActive è¿›è¡Œäº‹ç‰©æƒ…å†µçš„åˆ¤æ–­ã€‚
public class TransactionTest{ @Test @Transactional public void test1(){ // å­˜åœ¨ @Transactional æ³¨è§£æ—¶ï¼Œè¿”å› true; boolear isOpen = TransactionSynchronizationManager.isActualTransactionActive(); } @Test public void test2() { // åˆ é™¤ @Transactional æ³¨è§£æ—¶ï¼Œè¿”å› false; boolear isOpen = TransactionSynchronizationManager.isActualTransactionActive(); } } æ–¹æ³•äºŒ:å¯ä»¥é€šè¿‡ TransactionSynchronizationRegistry æ£€æµ‹æ˜¯å¦å­˜åœ¨äº‹ç‰©ã€‚
import javax.transaction.Status; import javax.transaction.TransactionManager; import javax.transaction.TransactionSynchronizationRegistry; public class TransactionExample { private TransactionManager transactionManager; private TransactionSynchronizationRegistry synchronizationRegistry; public boolean isTransactionActive() { int transactionStatus = synchronizationRegistry.getTransactionStatus(); return transactionStatus == Status.STATUS_ACTIVE; } } </description>
    </item>
    
    <item>
      <title>SpringBoot-æ¥å£å­¦ä¹ -Converter</title>
      <link>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E6%8E%A5%E5%8F%A3%E5%AD%A6%E4%B9%A0-convertert%E4%BD%93%E7%B3%BB/</link>
      <pubDate>Thu, 13 Jul 2023 14:01:20 +0800</pubDate>
      
      <guid>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E6%8E%A5%E5%8F%A3%E5%AD%A6%E4%B9%A0-convertert%E4%BD%93%E7%B3%BB/</guid>
      <description>Converterçš„ä½œç”¨æ˜¯ä»€ä¹ˆ Converter æ˜¯ Spring æ¡†æ¶ä¸­çš„ä¸€ä¸ªé€šç”¨æ¥å£ï¼Œç”¨äºåœ¨ä¸åŒçš„ç±»å‹ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚å®ƒå®šä¹‰äº†ä¸€ä¸ª convert æ–¹æ³•ï¼Œç”¨äºå°†ä¸€ä¸ªå¯¹è±¡ä»ä¸€ä¸ªç±»å‹è½¬æ¢ä¸ºå¦ä¸€ä¸ªç±»å‹ Converteræ ¸å¿ƒæ–¹æ³•ä»‹ç» Converterçš„ä½œç”¨èŒƒå›´æ˜¯ä»€ä¹ˆ å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ªConverter // ä¸€å¯¹ä¸€è½¬æ¢ç¤ºä¾‹;æ¯”å¦‚Stringè½¬Booleanã€Stringè½¬Integer // org.springframework.core.convert.converter.Converter&amp;lt;S, T&amp;gt; import org.springframework.context.annotation.Configuration; @Configuration public class ConvertConfiguration() { @Bean public Converter&amp;lt;String, LocalDate&amp;gt; localDateConverter() { return new Converter&amp;lt;String, LocalDate&amp;gt;() { @Override public LocalDate convert(String source) { return LocalDate.parse(source, DateTimeFormatter.ofPattern(&amp;#34;yyyy-MM-dd&amp;#34;)); } }; } } // ä¸€è½¬å¤šç¤ºä¾‹;æ¯”å¦‚Stringè½¬Enum // org.springframework.core.convert.converter.ConverterFactory&amp;lt;S, R&amp;gt; public class StringToEnumConverterFactory implements ConverterFactory&amp;lt;String, Enum&amp;gt; { @Override public &amp;lt;T extends Enum&amp;gt; Converter&amp;lt;String, T&amp;gt; getConverter(Class&amp;lt;T&amp;gt; targetType) { return new StringToEnum(ConversionUtils.</description>
    </item>
    
    <item>
      <title>SpringBoot-æ¥å£å­¦ä¹ -Converterã€TypeConverterã€HttpMessageConverterä½¿ç”¨åœºæ™¯ä¸æ¯”è¾ƒ</title>
      <link>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E6%8E%A5%E5%8F%A3%E5%AD%A6%E4%B9%A0-convertertypeconverterhttpmessageconverter%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E4%B8%8E%E6%AF%94%E8%BE%83/</link>
      <pubDate>Thu, 13 Jul 2023 14:01:20 +0800</pubDate>
      
      <guid>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E6%8E%A5%E5%8F%A3%E5%AD%A6%E4%B9%A0-convertertypeconverterhttpmessageconverter%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E4%B8%8E%E6%AF%94%E8%BE%83/</guid>
      <description>Converter çš„ä½¿ç”¨åœºæ™¯
TypeConverter çš„ä½¿ç”¨åœºæ™¯ TypeConverter ä¸»è¦ç”¨äºåœ¨ Spring æ¡†æ¶ä¸­çš„ Bean ä¸­è¿›è¡Œæ•°æ®ç±»å‹è½¬æ¢ã€‚ å®ƒæä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥å°†å±æ€§å€¼ä»å­—ç¬¦ä¸²è¡¨ç¤ºè½¬æ¢ä¸º Java ç±»å‹ï¼Œå¹¶åœ¨æ•´ä¸ª Spring æ¡†æ¶ä¸­å¾—åˆ°å¹¿æ³›åº”ç”¨ã€‚TypeConverter æ¥å£å®šä¹‰äº†ä¸€ä¸ª convertIfNecessary æ–¹æ³•ï¼Œç”¨äºå°†å­—ç¬¦ä¸²å€¼è½¬æ¢ä¸ºæŒ‡å®šçš„ Java ç±»å‹ã€‚HttpMessageConverter ä¸»è¦ç”¨äºåœ¨ HTTP è¯·æ±‚å’Œå“åº”ä¸­è¿›è¡Œæ•°æ®è½¬æ¢ã€‚å®ƒæä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥å°† Java å¯¹è±¡è½¬æ¢ä¸º HTTP è¯·æ±‚æˆ–å“åº”ä¸­çš„æ ¼å¼ï¼Œä¾‹å¦‚ JSONã€XMLã€HTML ç­‰
HttpMessageConverter çš„ä½¿ç”¨åœºæ™¯ HttpMessageConverter ä¸»è¦ç”¨äºåœ¨ HTTP è¯·æ±‚å’Œå“åº”ä¸­è¿›è¡Œæ•°æ®è½¬æ¢ã€‚ å®ƒæä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥å°† Java å¯¹è±¡è½¬æ¢ä¸º HTTP è¯·æ±‚æˆ–å“åº”ä¸­çš„æ ¼å¼ï¼Œä¾‹å¦‚ JSONã€XMLã€HTML ç­‰ã€‚HttpMessageConverter æ¥å£å®šä¹‰äº†ä¸¤ä¸ªæ–¹æ³•ï¼šcanRead å’Œ canWriteï¼Œç”¨äºç¡®å®šæ˜¯å¦å¯ä»¥å°†æŒ‡å®šçš„åª’ä½“ç±»å‹è¯»å–æˆ–å†™å…¥ã€‚å› æ­¤ï¼ŒTypeConverter å’Œ HttpMessageConverter çš„ä¸»è¦åŒºåˆ«åœ¨äºå®ƒä»¬çš„åº”ç”¨åœºæ™¯å’Œå®ç°æ–¹å¼ã€‚TypeConverter ä¸»è¦ç”¨äºåœ¨ Spring æ¡†æ¶ä¸­çš„ Bean ä¸­è¿›è¡Œæ•°æ®ç±»å‹è½¬æ¢ï¼Œè€Œ HttpMessageConverter ä¸»è¦ç”¨äºåœ¨ HTTP è¯·æ±‚å’Œå“åº”ä¸­è¿›è¡Œæ•°æ®è½¬æ¢ã€‚
æ–¹æ³•æŠ›å‡º&amp;#39;org.springframework.beans.TypeMismatchException&amp;#39;å¼‚å¸¸. Failed to convert value of type &amp;#39;java.lang.String&amp;#39; to required type &amp;#39;java.time.LocalDate&amp;#39; å¼‚å¸¸å‘ç”Ÿä½ç½®ï¼šAbstractNamedValueMethodArgumentResolver#resolveArgument binder.</description>
    </item>
    
    <item>
      <title>SpringBoot-æ¥å£å­¦ä¹ -HandlerMethodArgumentResolver</title>
      <link>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E6%8E%A5%E5%8F%A3%E5%AD%A6%E4%B9%A0-handlermethodargumentresolver/</link>
      <pubDate>Thu, 13 Jul 2023 14:01:20 +0800</pubDate>
      
      <guid>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E6%8E%A5%E5%8F%A3%E5%AD%A6%E4%B9%A0-handlermethodargumentresolver/</guid>
      <description>HandlerMethodArgumentResolver æ˜¯SpringBootçš„ä¸€ä¸ªæ‰©å±•æ¥å£ï¼Œç”¨äºè§£ææ“ä½œæ–¹æ³•å‚æ•°ï¼Œç”±äºå…¶åªæ˜¯ä¸€ä¸ªè§„åˆ™å®šä¹‰ä¸æ•°æ®è·å–çš„ç»„ä»¶ï¼Œæ‰€ä»¥è‹¥æƒ³ä½¿ç”¨ï¼Œè¿˜éœ€è¦çŸ¥é“ç›®æ ‡èŒƒå›´ï¼Œæ•…ä¸€èˆ¬é…åˆæ‹¦æˆªå™¨ä½¿ç”¨ã€‚
è¯¥æ¥å£ä¸­ä¸€å…±å­˜åœ¨ä¸¤ä¸ªæ–¹æ³•:
supportsParameter: ä½œç”¨æ˜¯åŒ¹é…è§„åˆ™ï¼Œå½“æ»¡è¶³æœ¬æ–¹æ³•çš„è§„åˆ™æ—¶ï¼Œä¼šæ‰§è¡ŒresolveArgumentã€‚ resolveArgument: ä½œç”¨æ˜¯å…·ä½“è§£æ/æ“ä½œå‚æ•°ã€‚ ä½¿ç”¨æ–¹å¼ ä»¥æ³¨å…¥æ“ä½œç”¨æˆ·ä¿¡æ¯åˆ°Controlleræ–¹æ³•ä¸ºä¾‹
å‰ç½®æ¡ä»¶ï¼šéœ€è¦é€šè¿‡æ‹¦æˆªå™¨åœ¨è¯·æ±‚å¤´æ‹¿åˆ°token/ç”¨æˆ·ä¿¡æ¯ï¼Œå¹¶æ”¾å…¥çº¿ç¨‹å‰¯æœ¬ä¾›åç»­æ“ä½œä½¿ç”¨ã€‚ å®ç°HandlerMethodArgumentResolveræ¥å£ public class ContextUserArgumentResolver implements HandlerMethodArgumentResolver { @Override public boolean supportsParameter(@NotNull MethodParameter parameter) { // åˆ¤æ–­å‚æ•°æ˜¯å¦æ˜¯ç”¨æˆ·ä¿¡æ¯ç±»å‹ï¼Œåˆ¤æ–­ä¾æ®(è¢«InjectContextUseræ³¨è§£æ ‡è®°ï¼Œæˆ–è€…ç±»å‹ä¸ºContextUser) return findMethodAnnotation(InjectContextUser.class, parameter) != null || parameter.getParameterType().isAssignableFrom(ContextUser.class); } @Override public Object resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer, NativeWebRequest webRequest, WebDataBinderFactory binderFactory) throws Exception { // é€šè¿‡ä¸Šä¸‹æ–‡è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ return ContextHolder.getContext().getContextUser(); } /** * åˆ¤æ–­å‚æ•°æ˜¯å¦åŒ…å«æŒ‡å®šæ³¨è§£ï¼Œè‹¥åŒ…å«ï¼Œåˆ™è¿”å›è¯¥æ³¨è§£ã€‚ * * @param clazz æ³¨è§£ç±»å‹ * @param parameter å‚æ•°å¯¹è±¡ * @return å‚æ•°æ ‡è®°çš„æ³¨è§£å¯¹è±¡ */ private &amp;lt;T extends Annotation&amp;gt; T findMethodAnnotation(Class&amp;lt;T&amp;gt; clazz, MethodParameter parameter) { T annotation = parameter.</description>
    </item>
    
    <item>
      <title>SpringBoot-æ¥å£å­¦ä¹ -HttpMessageConverter</title>
      <link>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E6%8E%A5%E5%8F%A3%E5%AD%A6%E4%B9%A0-httpmessageconvertert%E4%BD%93%E7%B3%BB/</link>
      <pubDate>Thu, 13 Jul 2023 14:01:20 +0800</pubDate>
      
      <guid>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E6%8E%A5%E5%8F%A3%E5%AD%A6%E4%B9%A0-httpmessageconvertert%E4%BD%93%E7%B3%BB/</guid>
      <description>HttpMessageConverterçš„ä½œç”¨æ˜¯ä»€ä¹ˆ å°†è¯·æ±‚çš„HTTPåè®®è½¬æ¢ä¸ºJavaå¯¹è±¡ å°†å“åº”çš„Javaå¯¹è±¡è½¬æ¢ä¸ºHTTPåè®® HttpMessageConverteræ ¸å¿ƒæ–¹æ³•ä»‹ç» -- æ˜¯å¦å¯å°†è¯·æ±‚çš„HTTPåè®®è¯»ä¸ºå¯¹è±¡ canRead -- æ˜¯å¦å¯å°†å“åº”çš„å¯¹è±¡å†™åˆ°HTTPåè®® canWrite -- å°†è¯·æ±‚çš„Httpåè®®è¯»æˆå¯¹è±¡ read -- å°†å“åº”çš„å¯¹è±¡å†™å…¥Httpåè®® write -- è·å–å½“å‰è½¬æ¢å™¨æ”¯æŒçš„æ‰€æœ‰Mediaç±»å‹ getSupportedMediaTypes HttpMessageConverterçš„ä½œç”¨èŒƒå›´æ˜¯ä»€ä¹ˆ ä½¿ç”¨@RequestBodyæ³¨è§£æ—¶ï¼ŒHTTPè½¬Javaå¯¹è±¡ ä½¿ç”¨@ResponseBodyæ³¨è§£æ—¶ï¼ŒJavaå¯¹è±¡è½¬HTTP
å¦‚ä½•è‡ªå®šä¹‰HttpMessageConverter package czb.settle.ledger.core.config.application; import org.springframework.http.HttpHeaders; import org.springframework.http.HttpInputMessage; import org.springframework.http.HttpOutputMessage; import org.springframework.http.MediaType; import org.springframework.http.converter.AbstractHttpMessageConverter; import org.springframework.http.converter.HttpMessageNotReadableException; import org.springframework.http.converter.HttpMessageNotWritableException; import org.springframework.lang.Nullable; import org.springframework.util.Assert; import org.springframework.util.StreamUtils; import java.io.IOException; import java.nio.charset.Charset; import java.time.LocalDate; import java.time.format.DateTimeFormatter; /** * @author huangry * Created in 2023/11/16 15:53 */ public class LocalDateHttpMessageConverter extends AbstractHttpMessageConverter&amp;lt;LocalDate&amp;gt; { private final String DATE_FORMAT = &amp;#34;yyyy-MM-dd&amp;#34;; @Override protected boolean supports(Class&amp;lt;?</description>
    </item>
    
    <item>
      <title>SpringBoot-æ¥å£å­¦ä¹ -InitializingBean</title>
      <link>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E6%8E%A5%E5%8F%A3%E5%AD%A6%E4%B9%A0-initializingbean/</link>
      <pubDate>Thu, 13 Jul 2023 14:01:20 +0800</pubDate>
      
      <guid>https://huangruiying.github.io/%E5%AD%A6%E4%B9%A0%E6%A1%86%E6%9E%B6/springframework/springboot-%E6%8E%A5%E5%8F%A3%E5%AD%A6%E4%B9%A0-initializingbean/</guid>
      <description>åœ¨è®¾ç½®äº†æ‰€æœ‰ã€Œå½“å‰å¯¹è±¡ã€å±æ€§åè°ƒç”¨
public class A implements InitializingBean{
}</description>
    </item>
    
  </channel>
</rss>
